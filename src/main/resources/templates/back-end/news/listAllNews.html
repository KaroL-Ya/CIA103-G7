<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>所有新聞資料 - listAllNews.html</title>
<style>
    /* 全局樣式 */
    body {
        font-family: Arial, sans-serif;
        background-color: #f9f9f9;
        margin: 0;
        padding: 0;
    }

    /* 導航欄樣式 */
    nav {
        background-color: #28a745;
        color: white;
        text-align: center;
        padding: 15px;
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    nav h2, nav h3 {
        margin: 5px 0;
    }

    nav h3 a {
        color: white;
        text-decoration: none;
    }

    nav h3 a img {
        vertical-align: middle;
        margin-right: 5px;
        width: 20px;
    }

    /* 分頁訊息 */
    .info {
        margin: 100px auto 10px;
        text-align: center;
        font-size: 16px;
    }

    .info b {
        color: #333;
    }

    .info font {
        font-weight: bold;
    }

    /* 標題區塊 */
    .header {
        padding: 5px;
        width: 90%;
        background-color: #CCCCFF;
        margin: 10px auto;
        display: flex;
        justify-content: space-between;
        border: 1px solid #000;
        font-weight: bold;
    }

    .header span {
        flex: 1;
        text-align: center;
    }

    /* 表格樣式 */
    table {
        background-color: white;
        width: 90%;
        margin: 10px auto;
        border-collapse: collapse;
    }

    table, th, td {
        border: 1px solid #CCCCFF;
    }

    th, td {
        padding: 10px;
        text-align: center;
        font-size: 14px;
    }

    /* 分頁按鈕樣式 */
    .page {
        text-align: center;
        margin-top: 20px;
    }

    .page a {
        display: inline-block;
        width: 32px;
        height: 32px;
        border: 1px solid #CCC;
        line-height: 32px;
        text-align: center;
        margin: 0 5px;
        color: #999;
        text-decoration: none;
        background-color: #fff;
    }

    .page a:hover {
        background-color: #CCC;
    }

    .page a.active {
        background-color: #006B00;
        color: #fff;
    }
</style>
<script src="/js/jquery-1.11.3.min.js"></script>
<script>
    // 分頁顯示
    $(function () {
        var $table = $("table");
        var currentPage = 0; // 當前頁默認值為0  
        var pageSize = 3; // 每頁顯示數目  
        $table.bind('paging', function () {
            $table.find('tbody tr').hide().slice(currentPage * pageSize, (currentPage + 1) * pageSize).show();
        });

        var sumRows = $table.find('tbody tr').length;
        var sumPages = Math.ceil(sumRows / pageSize);
        $("#pageNumber").text(sumPages);

        var $pager = $('<div class="page"></div>');
        for (var pageIndex = 0; pageIndex < sumPages; pageIndex++) {
            $('<a href="#" class="page-link">' + (pageIndex + 1) + '</a>')
                .bind("click", { newPage: pageIndex }, function (event) {
                    currentPage = event.data["newPage"];
                    $("#currentPage").text(currentPage + 1);
                    $table.trigger("paging");
                    $(".page a").removeClass("active");
                    $(this).addClass("active");
                })
                .appendTo($pager);
        }
        $pager.insertAfter($table);
        $table.trigger("paging");

        $(".page a:first").addClass("active");
    });
</script>
</head>
<body>

<nav>
    <h2>所有新聞資料 - listAllNews.html</h2>
    <h3>
        <a class="navbar-brand" th:href="@{/news/selectNews}">
            <img th:src="@{/images/back1.gif}" alt="返回">
            回查詢頁
        </a>
    </h3>
</nav>

<div class="info">
    <b>第 <span id="currentPage">1</span>/<span id="pageNumber"></span> 頁</b>
    ● 符 合 查 詢 條 件 如 下 所 示 : 共 <font color="red" th:text="${newsListData.size}"></font> 筆
</div>

<div class="header">
    <span>計數</span>
    <span>最新消息序號</span>
    <span>最新消息標題</span>
    <span>發送日期</span>
    <span>消息狀態</span>
    <span>消息內容</span>
    <span>修改</span>
    <span>刪除</span>
</div>

<table>
    <tbody>
        <th:block th:each="newsVO : ${newsListData}">
            <tr>
                <td th:text="${newsVOStat.count}"></td>
                <td th:text="${newsVO.newsId}"></td>
                <td th:text="${newsVO.title}"></td>
                <td th:text="${newsVO.time}"></td>
                <td th:text="${newsVO.status}"></td>
                <td th:text="${newsVO.content}"></td>
                <td>
                    <form method="post" th:action="@{/news/getOne_For_Update}">
                        <input type="submit" value="修改">
                        <input type="hidden" name="newsId" th:value="${newsVO.newsId}">
                    </form>
                </td>
                <td>
                    <form method="post" th:action="@{/news/delete}">
                        <input type="submit" value="刪除">
                        <input type="hidden" name="newsId" th:value="${newsVO.newsId}">
                    </form>
                </td>
            </tr>
        </th:block>
    </tbody>
</table>

</body>
</html>
